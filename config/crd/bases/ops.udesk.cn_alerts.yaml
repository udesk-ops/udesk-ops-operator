---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.18.0
  name: alerts.ops.udesk.cn
spec:
  group: ops.udesk.cn
  names:
    kind: Alert
    listKind: AlertList
    plural: alerts
    singular: alert
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.alertStatus
      name: Alert Status
      type: string
    - jsonPath: .metadata.name
      name: Name
      type: string
    - jsonPath: .spec.description
      name: Description
      type: string
    - jsonPath: .status.scaleTarget.name
      name: Scale Target
      type: string
    - jsonPath: .status.scaleDuration
      name: Scale Duration
      type: string
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: Alert is the Schema for the alerts API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: AlertSpec defines the desired state of Alert.
            properties:
              alertStatus:
                description: |-
                  AlertStatus is the status of the alert.
                  where the value must be one of the predefined statuses.
                enum:
                - active
                - resolved
                type: string
              description:
                description: |-
                  Description is a brief description of the alert.
                  where the length must not exceed 256 characters.
                maxLength: 256
                type: string
            required:
            - alertStatus
            type: object
          status:
            description: AlertStatus defines the observed state of Alert.
            properties:
              scaleDuration:
                description: |-
                  ScaleDuration is the duration for which the scaling should be applied.
                  where s=seconds, m=minutes, h=hours, d=days, w=weeks
                pattern: ^(\d+)([smhdw])$
                type: string
              scaleStatus:
                description: |-
                  ScaleStatus indicates the current scaling status of the alert.
                  where the value must be one of the predefined statuses.
                enum:
                - pending
                - scaling
                - completed
                - failed
                type: string
              scaleTarget:
                description: ScaleTarget is the target resource for scaling operations.
                properties:
                  apiVersion:
                    description: |-
                      APIVersion is the API version of the target resource.
                      where the first part is the group and the second part is the version,
                      both can contain alphanumeric characters, dots, underscores, and hyphens.
                    pattern: ^[a-zA-Z0-9._-]+/[a-zA-Z0-9._-]+$
                    type: string
                  kind:
                    description: |-
                      Kind is the kind of the target resource (e.g., Deployment, StatefulSet).
                      where the first character is uppercase and the rest are alphanumeric
                    pattern: ^[A-Z][a-zA-Z0-9]*$
                    type: string
                  name:
                    description: |-
                      Name is the name of the target resource.
                      where a-z, A-Z, 0-9, and '-' are allowed,
                      and must start and end with an alphanumeric character.
                    pattern: ^[a-zA-Z0-9]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                    type: string
                  namespace:
                    description: |-
                      Namespace is the namespace of the target resource.
                      where a-z, 0-9, and '-' are allowed,
                      and must start and end with a lowercase alphanumeric character.
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                required:
                - kind
                - name
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
